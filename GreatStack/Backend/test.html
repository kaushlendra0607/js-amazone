<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Test /api/product/add</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; padding: 24px; max-width: 760px; margin: auto; }
    label { display:block; margin-top:12px; font-weight:600; }
    input, textarea, select { width:100%; padding:8px; margin-top:6px; box-sizing:border-box; }
    .files { display:flex; gap:8px; margin-top:6px; }
    .files input { width:auto; }
    button { margin-top:16px; padding:10px 16px; font-size:16px; }
    small { color:#555; }
  </style>
</head>
<body>
  <h1>Test Add Product (POST /api/product/add)</h1>

  <!--
    Change the action URL below if your server runs on a different host/port.
    Example: action="http://localhost:4000/api/product/add"
  -->
  <form id="uploadForm" action="http://localhost:4000/api/product/add" method="POST" enctype="multipart/form-data">
    <label>
      Name
      <input name="name" type="text" value="Test Product" required />
    </label>

    <label>
      Description
      <textarea name="description" rows="3">This is a test product uploaded from HTML form.</textarea>
    </label>

    <label>
      Price
      <input name="price" type="number" step="0.01" value="499.99" required />
    </label>

    <label>
      Category
      <input name="category" type="text" value="Clothing" />
    </label>

    <label>
      Sub Category
      <input name="subCategory" type="text" value="T-Shirts" />
    </label>

    <label>
      Sizes (comma separated)
      <input name="sizes" type="text" value="S,M,L,XL" />
      <small>Your backend can split this string if needed.</small>
    </label>

    <label>
      Bestseller
      <select name="bestseller">
        <option value="false" selected>false</option>
        <option value="true">true</option>
      </select>
    </label>

    <label>Images (image1 - image4)</label>
    <div class="files">
      <input name="image1" type="file" accept="image/*" />
      <input name="image2" type="file" accept="image/*" />
      <input name="image3" type="file" accept="image/*" />
      <input name="image4" type="file" accept="image/*" />
    </div>
    <small>You can leave some image inputs empty; the server will skip them.</small>

    <button type="submit">Upload Product</button>
  </form>

  <hr/>
  <h3>Optional: Test with JavaScript (AJAX)</h3>
  <p>If you prefer an XHR/fetch test that shows the JSON response inline, click the button below instead of submitting the form.</p>

  <button id="ajaxBtn">Submit via fetch() and show response</button>
  <pre id="result" style="background:#f7f7f7;padding:12px;border:1px solid #eee;margin-top:12px;white-space:pre-wrap"></pre>

  <script>
    document.getElementById('ajaxBtn').addEventListener('click', async () => {
      const form = document.getElementById('uploadForm');
      const formData = new FormData(form);

      // If your backend expects JSON for sizes or other fields, convert here.
      // Example: formData.set('sizes', JSON.stringify(['S','M','L']));

      const resultEl = document.getElementById('result');
      resultEl.textContent = 'Sending...';

      try {
        const res = await fetch(form.action, {
          method: 'POST',
          body: formData
        });

        // try to parse JSON, otherwise show text
        const ct = res.headers.get('content-type') || '';
        const data = ct.includes('application/json') ? await res.json() : await res.text();

        resultEl.textContent = 'HTTP ' + res.status + '\\n' + JSON.stringify(data, null, 2);
      } catch (err) {
        resultEl.textContent = 'Error: ' + err.message;
      }
    });
  </script>
</body>
</html>
